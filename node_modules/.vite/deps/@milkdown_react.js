import {
  require_react
} from "./chunk-2JR5MSOI.js";
import {
  __toESM
} from "./chunk-AC2VUBZ6.js";

// node_modules/.pnpm/@milkdown+react@7.2.3_@milkdown+core@7.2.3_@milkdown+ctx@7.2.3_@milkdown+prose@7.2.3_@milkdow_ptasmrvnpydugqqqpwa7qpsmbe/node_modules/@milkdown/react/lib/index.es.js
var import_react = __toESM(require_react());
var i = (0, import_react.createContext)({});
var I = () => {
  const { dom: t, editor: o, setLoading: e, editorFactory: r } = (0, import_react.useContext)(i), d = (0, import_react.useRef)(null);
  return (0, import_react.useEffect)(() => {
    const n = d.current;
    if (!r || !n)
      return;
    t.current = n;
    const s = r(n);
    if (s)
      return e(true), s.create().then((c) => {
        o.current = c;
      }).finally(() => {
        e(false);
      }).catch(console.error), () => {
        var c;
        (c = o.current) == null || c.destroy();
      };
  }, [t, o, r, e]), d;
};
var C = () => {
  const t = I();
  return import_react.default.createElement("div", { "data-milkdown-root": true, ref: t });
};
var R = ({ children: t }) => {
  const o = (0, import_react.useRef)(void 0), [e, r] = (0, import_react.useState)(void 0), d = (0, import_react.useRef)(), [n, s] = (0, import_react.useState)(true), c = (0, import_react.useMemo)(() => ({
    loading: n,
    dom: o,
    editor: d,
    setLoading: s,
    editorFactory: e,
    setEditorFactory: r
  }), [n, e]);
  return import_react.default.createElement(i.Provider, { value: c }, t);
};
var k = (t, o = []) => {
  const e = (0, import_react.useContext)(i), r = (0, import_react.useCallback)(t, o);
  return (0, import_react.useLayoutEffect)(() => {
    e.setEditorFactory(() => r);
  }, [e, r]), {
    loading: e.loading,
    get: () => e.editor.current
  };
};
var F = () => {
  const t = (0, import_react.useContext)(i), o = (0, import_react.useCallback)(() => t.editor.current, [t.editor]);
  return [t.loading, o];
};
export {
  C as Milkdown,
  R as MilkdownProvider,
  k as useEditor,
  F as useInstance
};
//# sourceMappingURL=@milkdown_react.js.map
